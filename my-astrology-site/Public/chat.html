<!-- chat.html -->
<div id="chat-box" style="height: 400px; overflow-y: scroll;"></div>
<input type="text" id="message-input">
<button onclick="sendMessage()">发送</button>

<script>
  // 修改发送请求部分
async function sendMessage() {
  const message = document.getElementById('message-input').value;
  const response = await fetch('/api/ask', {  // 确保路径正确
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ 
      message: message,
      userId: '当前用户ID（需从Supabase获取）' 
    })
  });
  // ... 
}